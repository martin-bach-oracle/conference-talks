<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog 
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:n0="http://www.oracle.com/xml/ns/dbchangelog-ext" 
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
	http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">
	<changeSet id="r1-05" author="mcb" failOnError="true"   runOnChange="false" runAlways="false"  >
		<n0:createSxmlObject objectName="THINGS" objectType="VIEW" ownerName="EMILY"  replaceIfExists="false" >
			<n0:source><![CDATA[
  <VIEW xmlns="http://xmlns.oracle.com/ku" version="1.0">
   <SCHEMA>%USER_NAME%</SCHEMA>
   <NAME>THINGS</NAME>
   <JSON_DUALITY></JSON_DUALITY>
   <DEFAULT_COLLATION>USING_NLS_COMP</DEFAULT_COLLATION>
   <ANNOTATION_LIST></ANNOTATION_LIST>
   <SUBQUERY>demo_things @insert @update @delete
{
    _id         : id
    name        : name
    description : description
    price       : price
    available   : available
    demo_thing_categories @unnest
    {
        categoryId : id
        category   : name
    }
    stock : demo_thing_stock @insert @update @delete
    {
        thingStockId : id
        quantity     : quantity
        demo_warehouse @unnest
        {
            warehouseId : id
            warehouse   : name
        }
    }
}</SUBQUERY>
</VIEW>]]></n0:source>
		</n0:createSxmlObject>
        <!-- <rollback>
            <n0:dropSxmlObject
        </rollback> -->
	</changeSet>
</databaseChangeLog>
